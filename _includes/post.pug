---
layout: base.pug
---

- const dateOptions = { year: 'numeric', month: 'long', day: 'numeric' };

article.post
  div.post__info
    h1.post__title !{pageTitle}
    p.post__date Published !{page.date.toLocaleDateString("en-US", dateOptions) }
  section !{content}
  unless typeof footnotes === 'undefined' || footnotes.length === 0
    section
      hr
      strong Footnotes:
      ol.footnotes
        each footnote, index in footnotes
          - const noteIndex = index + 1;
          - const id = `f${noteIndex}`;
          - const refId = `#a${noteIndex}`
          li.footnotes__item(id=id ) !{footnote}
            | 
            a.footnotes__back(href=refId) (Back)

- const spoilerRegex = /<div class="spoiler">/gi
- const hasSpoiler = spoilerRegex.test(content)

if hasSpoiler
  script.
    var btns = document.querySelectorAll('.spoiler__reveal');
    btns.forEach(btn => {
      btn.addEventListener('click', function(event) {
        event.preventDefault();
        var spoilerText = this.parentNode.querySelector('.spoiler__content');
        spoilerText.classList.add('spoiler__content--revealed');
        this.remove();
      });
    })
